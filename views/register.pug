doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        script(src="https://kit.fontawesome.com/a5b1eae3e6.js" crossorigin="anonymous") 
        style
            include ../public/css/style.css
            include ../public/css/menu.css
        title Register
    body
        include ./guest_menu.pug
        .container
            label(for="name") Name
            input(type="text" name="name" id="name" required)
            label(for="surname") Surname
            input(type="text" name="surname" id="surname" required)  
            label(for="email") Email
            input(type="text" name="email" id="email" required) 
            label(for="password") Password
            .pass_container
                input(type="password" name="password" id="password" required) 
                i(id="togglePassword" class="fas fa-eye-slash")
            input(type="submit", value="Register User" id="btn_create_user")

        script.
            const btn_create_user = document.querySelector('#btn_create_user')
            const input_name = document.querySelector('#name')
            const input_surname = document.querySelector('#surname')
            const input_email = document.querySelector('#email')
            const input_password = document.querySelector('#password')
                btn_create_user.addEventListener('click', () => {
                    (async () => {
                        const response = await fetch('/api/user', {
                            method: 'POST',
                            headers: {
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: input_name.value,
                                surname: input_surname.value,
                                email: input_email.value,
                                password: input_password.value,
                            })
                        })
                    })()
            })